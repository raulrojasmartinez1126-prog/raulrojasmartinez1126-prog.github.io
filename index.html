<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Evaluación Clínica Integral</title>

<style>
body { margin:0; font-family: Arial,sans-serif; background:#f2f5f9; }
header { background:#0d6efd; color:white; padding:15px; text-align:center; font-size:18px; }
.container { padding:15px; }
.card { background:white; border-radius:12px; padding:15px; margin-bottom:15px; box-shadow:0 4px 10px rgba(0,0,0,0.08);}
h3 { margin-top:0; color:#0d6efd; }

input, select {
  width:100%;
  padding:8px;
  border-radius:8px;
  border:1px solid #ccc;
  margin-top:8px;
}

button {
  width:100%;
  padding:12px;
  background:#0d6efd;
  color:white;
  border:none;
  border-radius:10px;
  font-size:16px;
  margin-top:15px;
}

.grid {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
  gap:10px;
  margin-top:10px;
}

.card-item {
  border:1.5px solid #d0d7de;
  border-radius:10px;
  padding:10px;
  background:#fff;
  cursor:pointer;
}

.card-item.activo {
  background:#e7f1ff;
  border-color:#0d6efd;
  font-weight:600;
}

.lista {
  background:white;
  border:1px solid #ccc;
  border-radius:8px;
  margin-top:5px;
  max-height:220px;
  overflow-y:auto;
}

.item {
  padding:8px;
  cursor:pointer;
  border-bottom:1px solid #eee;
}
.item:hover { background:#f0f6ff; }
</style>
</head>

<body>

<header>Evaluación Clínica Integral</header>

<div class="container">

<div class="card">
<h3>Datos del paciente</h3>
<input placeholder="Nombre">
<input type="number" placeholder="Edad">
<select>
<option value="">Sexo</option>
<option>Masculino</option>
<option>Femenino</option>
</select>
</div>

<div class="card">
<h3>Síntomas (CIE-11)</h3>
<input id="buscadorCIE" placeholder="Ej: dolor, disnea, mareo">
<div id="listaCIE" class="lista"></div>
<div id="seleccionCIE" class="grid"></div>
</div>

<div class="card">
<h3>Signos clínicos</h3>
<input id="buscadorSignos" placeholder="Ej: nistagmo, atrofia">
<div id="listaSignos" class="lista"></div>
<div id="seleccionSignos" class="grid"></div>
</div>

<button onclick="generarResumen()">Generar resumen</button>

</div>

<script>
// ======= UTIL =======
const norm = t => t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase();

function guardar(clave, datos){
  localStorage.setItem(clave, JSON.stringify(datos));
}
function cargar(clave){
  return JSON.parse(localStorage.getItem(clave) || "[]");
}

// ======= CIE FALLBACK (si backend no responde) =======
const cieLocal = [
 {codigo:"MB11.0", titulo:"Dol
